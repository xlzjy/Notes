## 运算符

### 一、算术运算符

- `+、-、*、/`

>**注意：**
>
>`0 / 0` 发生除`0`异常
>
>`0 / 0.0 `或 `double / 0 `不会发生异常，得到结果正无穷大或者负无穷大

```java
double a = 5.2;
double b = 3.1;
double div = a / b;
System.out.println(div); // 1.677419354838

// 输出正无穷大：Infinity
System.out.println(5/0.0);

// 除0异常
// java.lang.ArithmeticException: / by zero
System.out.println(-5 / 0);
```

- `%`

>1. 求模运算符，其结果不一定总是整数，它的计算结果是使用第一个操作数除以第二个操作数，得到一个整除的结果后剩下的值就是余数。
>2. 由于求模运算也需要进行除法运算，因此如果求模运算的两个操作数都是整数类型，则求模运算的第二个操作数不能是`0`，否则将引发除以`0`异常；
>3. 如果求模运算的两个操作数中有一个或者两个都是浮点数，则允许第二个操作数是`0`或`0.0`，只是求模运算的结果是非数：`NaN`。
>4. `0`或`0.0`对`0`以外的任何数求模都将得到`0`或`0.0`。

```java
double a = 5.2;
double b = 3.1;
double mod = a % b;
System.out.println(mod); // 5.2 - 3.1 = 2.1
System.out.println(5 % 0.0); // 输出非数, NaN 
System.out.println(0 % 5.0); // 0.0 
System.out.println(0 % 0.0); // 输出非数, NaN

// 出现异常;java.lang.ArithmeticException: / by zero
// System.out.println(-5 % 0); 
```

- `a++、a--、++a、--a`

>**自加和自减只能用于操作变量，不能用于操作数值直接量、变量或表达式。**

- `Math类`

```java
double a = 3.2; // 定义变量a为3.2

// 求a得5次方
double b = Math.pow(a, 5);
System.out.println(b);

// 求a得平方根
double c = Math.sqrt(a);
System.out.println(c);

// 计算随机数，返回一个0~1之间的伪随机数
double d = Math.random();
System.out.println(d);

// 求1.57的sin函数值:1.57被当成弧度数
double e = Math.sin(1.57);
System.out.println(e); // 输出接近1
```

- `= 赋值运算符`

### 二、位运算符

- `&` 按位与，当两位同时为1时才返回1；
- `|`按位或，只要有一位为1即可返回1；
- `~ `按位非，单目运算符，将操作数的每个位（包括符号位）全部去反；
- `^` 按位异或，当两位相同时返回0，不同时返回1；
- `<<` 左移运算符；
  - 左移运算符是将操作数的二进制码整体左移指定位数，左移后右边空出来的位以0填充；
- `>>` 右移运算符；
  - 把第一个操作数的二进制码右移指定位数后，左边空出来的位以原来的符号位填充；
  - 即原来第一个操作数原来是正数，则左边补0，如果第一个操作数是负数，则左边补1；
- `>>>` 无符号右移运算符；
  - 它把第一个操作数的二进制码右移指定位数后，左边空出来的位总是以0填充；
- 位运算符只能操作整数类型的变量或值；

```java
System.out.println(5 & 9); // 输出1
System.out.println(5 | 9); // 输出13
System.out.println(~-5); // 输出4
System.out.println(5 ^ 9); // 输出12 
System.out.println(5 << 2); // 输出20
System.out.println(-5 << 2); // 输出-20
System.out.println(-5 >> 2); // 输出-2
System.out.println(-5 >>> 2); // 输出1073741822
```

>**注意：进行移位运算时还要遵循如下规则**
>
>- 对于低于`int`类型（如`byte`、`short`、`char`）的操作数总是先自动类型转换为int类型后再移位。
>- 对于`int`类型的整数移位`a>>b`，当`b>32`时，系统先用`b`对`32`求模（因为`int`类型只有`32`位），得到的结果才是整整移位的位数。例如，`a>>33`和`a>>1`的结果完全一样，而`a>>32`的结果和`a`相同。
>- 对于`long`类型的整数移动`a>>b`，当`b>64`时，总是先用`b`对`64`求模（因为`long`类型是`64`位），得到的结果才是真正移位的位数。

>**注意：**
>
>当进行移位运算时，只要被移位的二进制码没有发生有效位的数字丢失（对于正数而言，通常指被溢出的位全部都是0），可以发现**左移n为就相当于乘以2的n次方，右移n位则是除以2的n次方**。
>
>不仅如此，进行移位运算不会改变操作数本身，只是得到了一个新的运算结果，而原来的操作数本身不会改变。

### 三、扩展后的赋值运算符

`+=、-=、*=、/=、%=、&=、|=、^=、<<=、>>=、>>>=`

```java
// 定义一个byte类型的变量
byte a = 5;

// 下面语句出错，因为5默认是int类型，a+5就是int类型
// 把int类型赋给byte类型的变量，所以出错
// a = a + 5;

// 定义一个byte类型的变量
byte b = 5;
// 下面语句不会出现错误
b += 5;

// a = a + 5 和 a += 5虽然结果一样，但是底层得运行机制不同，存在一定得差异
```



### 四、比较运算符

- 比较运算符用于判断两个变量或常量的大小，结果是一个布尔值（`true`或`false`）
  - `>`
  - `>=`
  - `<`
  - `<=`
  - `==`
  - `!=`

>**注意：**
>
>基本类型的变量、值不能和引用类型的变量、值使用`==`进行比较；
>
>`boolean`类型的变量、值不能与其他任意类型的变量、值使用`==`比较；
>
>如果两个引用类型之间没有父子继承关系，那么它们的变量也不能使用`==`进行比较；

```java
System.out.println("5是否大于 4.0: " + (5 > 4.0)); // 输出true
System.out.println("5和5.0是否相等： " + (5 == 5.0)); // 输出true
System.out.println("97和'a'是否相等：" + (97 == 'a')); // 输出true
System.out.println("true和false是否相等： " + (true == false)); // 输出false

// 创建两个Test对象，分别赋值给t1和t2两个引用
Test t1 = new Test();
Test t2 = new Test();
// t1和t2是同一个类的两个实例的引用，所以可以比较
// 但t1和t2引用不同对象，所以返回false
System.out.println("t1是否等于t2: " + (t1 == t2));

// 直接将t1的值赋值给t3,即让t3指向t1指向的对象
Test t3 = t1;
// t1和t3指向同一个对象，所以返回true
System.out.println("t1是否等于t3: " + (t1 == t3));
```

### 五、逻辑运算符

| 符号 | 中文     | 作用                                                         |
| ---- | -------- | ------------------------------------------------------------ |
| `&&` | 与       | 前后两个操作数必须都是`true`才返回`true`，否则返回`false`    |
| `&`  | 不短路与 | 作用于`&&`相同，但不会短路                                   |
| `||` | 或       | 只要两个操作数中有一个是`true`，就可以返回`true`，否则返回`false` |
| `|`  | 不短路或 | 作用于与`||`相同，但不会短路                                 |
| `!`  | 非       | 只要一个操作数                                               |
| `^`  | 异或     | 当两个操作数不同时才返回`true`，如果两个操作数相同则返回`false` |

```java
// 直接对false求非运算，将返回true
System.out.println(!false);

// 5>3返回true,'6'转换为整数54,'6'>10返回true,求与后返回true
System.out.println(5 > 3 && '6' > 10);

// 4>=5返回false,'c'>'a'返回true,求或后返回true
System.out.println(4 >= 5 || 'c' > 'a');

// 4>=5返回false,'c'>'a'返回true,两个不同的操作数求异或返回true
System.out.println(4 >= 5 ^ 'c' > 'a');
```

```java
// 不短路逻辑或
int a = 5;
int b = 10;
// 对a>4和b++>10求或运算
if (a > 4 | b++ > 10) {
    // 输出a的值为5,b的值为11
    System.out.println("a = " + a + " b = " + b); // a=5,b=11
}

// 短路逻辑或
int c = 5;
int d = 10;
if (c > 4 || d++ > 10) {
    System.out.println("c = " + c + " d = " + d); // c=5,d=10
}
```

### 六、三目运算符

- 三目运算符` ？:`
- 语法（`expression）? if-true-statement : if-fasle-statement;`

```java
String str = 5 > 3 ? "5大于3" : "5不大于3";
System.out.println(str); // 输出"5大于3"

// 嵌套的三目运算符
int a = 11;
int b = 12;
System.out.println(a>b ? "a大于b" : (a<b? "a小于b" : "a等于b"));
```

### 七、运算符的结合性和优先级

- `Java`中除了`单目运算符`、`赋值运算符`、`三目运算符`是从右向左结合，其他运算符都是从左向右结合；

| 运算符说明         | Java运算符                              |
| ------------------ | --------------------------------------- |
| 分隔符             | . [] () {} , ;                          |
| 单目运算符         | ++ -- ~ ！                              |
| 强制类型转换运算符 | (type)                                  |
| 乘法/除法/求模     | * / %                                   |
| 加法/减法          | + -                                     |
| 移位运算符         | << >> >>>                               |
| 关系运算符         | < <= >= > instanceof                    |
| 等价运算符         | &                                       |
| 按位与             | &                                       |
| 按位异或           | ^                                       |
| 按位或             | \|                                      |
| 条件与             | &&                                      |
| 条件或             | \|\|                                    |
| 三目运算符         | ? :                                     |
| 赋值               | = += -= *= /= &= \|= ^= %= <<= >>= >>>= |

## links

- #### [目录](<README.md>)

- #### 上一节: [直接量](<01.7.md>)

- #### 下一节: [练习题](<01.9.md>)