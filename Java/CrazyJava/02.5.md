## 数组类型

### 一、数组也是一种类型

- `Java`数组要求所有数组元素具有相同的数据类型，因此，在一个数组中，数组元素的类型是唯一的，不能存储多种数据类型的数据；
- 一旦数组的初始化完成，数组在内存中所占的空间将被固定下来，因此数组的长度将不可改变，即使把某个数组元素的数据清空，但它所占的空间依然被保留，依然属于该数组，数组的长度依然不变；
- 数组是一种数据类型，它本身是一种引用类型；

>**`int[]`是一种类型嘛？怎么使用？**
>
>1. `int[]`是一种数据类型，与`int`类型、`String`类型类似，一样可以使用该类型来定义变量，也可以使用该类型进行类型转换等；
>
>2. `int[]`类型是一种引用类型，创建`int[]`类型的对象就是创建数组。

### 二、定义数组

```java
type[] arrayName; // 推荐的定义方法
type arrayName[]; // 不推荐的定义方法，易混淆
```

- 数组是一种引用类型的变量，因此使用它定义一个变量时，仅仅表示定义了一个引用变量（即定义了一个指针），这个引用变量还未指向任何有效的内存，**因此定义数组时不能指定数组的长度。**且由于定义数组只是定义了一个引用变量，并未指向任何有效的内存空间，所以还没有内存空间来存储数组元素，因此这个数组也不能使用，只是对数组进行初始化后才可以使用；

### 三、数组的初始化

- 数组初始化，就是为数组的数组元素分配内存空间，并为每个数组元素赋初始值；

- 数组初始化的两种方式：

  - **静态初始化**

    - 方法一：`arrayName = new type[]{element1, element2, element3, element4, ...}`

    ```java
    // 定义一个int数组类型的变量，变量名为intArr
    int[] intArr;
    // 使用静态初始化，初始化数组时只指定数组元素的初始值，不指定数组长度
    intArr = new int[]{5, 6, 8, 20};
    
    // 定义一个Object数组类型的变量，变量名为objArr
    Object[] objArr;
    // 使用静态初始化，初始化数组时数组元素的类型是定义数组时所指定的数组元素类型的子类
    objArr = new String[] {"Java", "Hello"};
    Object[] objArr2;
    // 使用静态初始化
    objArr2 = new Object[] {"Java", "haha"};
    ```

    - 方法二：`type [] arrayName = {element1, element2, ...}`

    ```java
    // 数组的定义和初始化同时完成，使用简化的静态初始化写法
    int[] a = {5, 6, 7, 9};
    ```

  - **动态初始化**

    - 动态初始化只指定数组的长度，由系统为每个数组元素指定初始值

    ```java
    arrayName = new type[length];
    ```

    ```java
    // 数组的定义和初始化同时完成，使用动态初始化语法
    int[] prices = new int[5];
    // 数组的定义和初始化同时完成，初始化数组时元素的类型是定义数组时元素类型的子类
    Object[] books = new String[4];
    ```

    - 执行动态初始化时，只需指定数组的长度，即为每个数组元素指定所需的内存空间，系统将负责为这些数组元素分配初始值，指定初始值时，系统按如下规则分配初始值：
      - 数组元素的类型是基本类型中的整数类型（`byte`、`short`、`int`、`long`），则数组元素的值是`0`；
      - 数组元素的类型是基本类型中的浮点类型（`float`、`double`），则数组元素的值是`0.0`；
      - 数组元素的类型是基本类型中的字符类型（`char`），则数组元素的值是`'\u0000'`；
      - 数组元素的类型是基本类型中的布尔类型（`boolean`），则数组元素的值是`false`；
      - 数组元素的类型是引用类型（`类`、`接口`和`数组`），则数组元素的值是`null`；
    - 不要同时使用静态初始化和动态初始化，即不要再进行数组初始化时，既指定数组的长度，又为每个数组元素分配初始值；

### 四、使用数组

- `Java`数组的索引是从`0`开始的，最后一个数组元素的索引为数组长度`-1`；
- 如果访问数组元素时指定的索引值小于`0`，或者大于等于数组的长度，编译程序不会出现任何错误但运行时出现异常：`java.lang.ArrayIndexOutOfBoundsException: N`(数组索引越界异常)，异常信息后的N就是试图访问的数组索引；

```java
// 使用循环输出prices数组的每个数组元素的值
for (int i = 0; i < prices.length; i++)
{
    System.out.println(prices[i]);
}
```

- 如果未被初始化的元素，输出为`null`；

```java
String[] books = new String[4];
books[0] = "hello";
books[1] = "world";

// 使用循环输出books数组的每个数组元素的值
for (int i = 0; i < books.length; i++) {
    System.out.println(books[i]);
}

/*
output:
    hello
    world
    null
    null
*/
```

### 五、foreach循环

- foreach循环能够遍历数组和集合更加简洁；
- 使用foreach循环遍历数组和集合元素时，无须获得数组和集合长度，无须根据索引来访问数组元素和集合元素，foreach循环自动遍历数组和集合的每个元素；

```java
// type是数组或集合元素的类型
// variableName是一个形参名
for (type variableName : array | collection)
{
    // variableName 自动迭代访问每个元素...
}
```

```java
String[] books = {"轻量级Java EE 企业应用实战" ,
                 "Java哈哈",
                 "Java学习"};
// 使用foreach循环来遍历数组元素
// 其中book将会自动迭代每个数组元素
for (String book : books) {
    System.out.println(book);
}
```

```java
String[] books = {
    "学java很简单",
    "才怪",
    "太难了"
};

// 使用foreach循环来遍历数组元素，其中book将会自动迭代每个数组元素
for (String book : books) {
    book = "好难啊";
    System.out.println(book);
}
System.out.println(books[0]);

/*
output:
    好难啊
    好难啊
    好难啊
    学java很简单
*/
```

>1. 从上面运行结果来看，由于在foreach循环中对数组元素进行赋值，结果导致不能正确遍历数组元素，不能正确地取出每个数组元素的值；
>
>2. 而且当再次访问第一个数组元素时，**发现数组元素的值依然没有改变**；
>
>3. 所以使用foreach来迭代访问数组元素时，foreach中的循环变量相当于一个临时变量，系统会把数组元素依次赋值给这个临时变量，而这个临时变量并不是数组元素，它只是保存了数组元素的值；
>
>4. **如果希望改变数组元素的值，不能使用foreach循环。**

## links

- #### [目录](<README.md>)

- #### 上一节: [控制循环结构](<02.4.md>)

- #### 下一节: [深入数组](<02.6.md>)